---
title: "Build a Custom Marketplace"
description: This guide walks you through building a custom marketplace using the Sequence stack. It covers token minting, wallet authentication, displaying collections, creating and purchasing listings, making and accepting offers, and managing inventory—all seamlessly integrated with an embedded wallet and Sequence Kit.
sidebarTitle: Build a Custom Marketplace
---

In this guide we will go through the process of creating a custom marketplace from a few simple tools from the Sequence stack.

The tools will enable you to perform:

1. [Minting](/guides/custom-marketplace#1-minting): Minting of tokens to your wallet from the Sequence Builder
2. [Wallet Authentication](/guides/custom-marketplace#2-wallet-authentication): Use of Sequence Kit to authenticate a user
3. [Displaying collections](/guides/custom-marketplace#3-displaying-collections): ((((Querying of token balances using the Indexer))))
4. [Listings and Offers](/guides/custom-marketplace#4-listings-and-offers): (((Allow users to either use a Sequence Wallet or an EOA)))
5. [(Optional) Inventory](/guides/custom-marketplace#5-inventory-optional): Add a inventory for your users

<Note>
See an example [simplified marketplace dapp](https://simple-marketplace-boilerplate.pages.dev/) that enables users to mint collectibles, sell the collectibles with the Sequence Marketplace Protocol, and make purchases with USDC on `base-sepolia` by getting a top order from the Marketplace.

The code can be found [here](https://github.com/0xsequence-demos/simple-marketplace-boilerplate)

</Note>

## 1. Minting

The first step is to create a collectible from the Sequence Builder and mint a few tokens, which can be accomplished with this [guide](/sdk/collectibles/deploy-an-item-collection) and to use the `tokenId` you minted in the following steps to query and fulfill orders.

## 2. Wallet Authentication

For your project, you'll need a way to authenticate your user with a wallet.

For this guide we'll use an `Embedded Wallet` with `Sequence Kit` connector which can authenticate users using Google or Apple auth, in addition to user brought wallets like Coinbase or Metamask.

### Install Packages

Either you can start from a great foundation with our [Marketplace Boilerplate](/solutions/marketplaces/orderbook/starter#quickstart%3A-marketplace-boilerplate), which already includes all of this integrated with a great UI, or we will walk you through how to use React from scratch here.

Start by creating a project in a folder of your name choosing:

```bash npm
npx create-next-app
```

```fix
Recommended versions:
* next@14.2.24
* react@18.3.1
```

Then, begin by installing the required packages in the `<project_name> folder`

```bash pnpm
pnpm add @0xsequence/kit @0xsequence/kit-checkout @0xsequence/kit-wallet @0xsequence/marketplace-sdk @0xsequence/design-system@^1 @0xsequence/network wagmi ethers@^6 viem 0xsequence @tanstack/react-query @tanstack/react-query-devtools @legendapp/state framer-motion@^8.5.2 pino-pretty
```

### Layout

Now we should create a Layout to use our 'Providers' component. First, we'll create a folder named 'config' inside the 'src' directory. Within it, we'll add a 'marketplace-sdk' folder containing two files: config.ts and ssr.ts.

#### Setting Up config.ts

In this file, we will define and manage essential configuration settings for our Marketplace SDK, including environment variables. This centralized approach ensures that configuration values are easily accessible and maintainable.

You can find the code in this [GitHub repository](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-config-ts)

#### Setting Up ssr.ts

This SSR Client serves as an entry point for initializing the marketplace SDK on the Next.js server, enabling efficient data fetching and configuration setup before rendering the UI.

You can find the code in this [GitHub repository](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-ssr-ts)

#### Understanding the SSR Client

The SSR Client allows you to access key marketplace data and configurations, which are essential for properly initializing the SDK on the server side. The following data can be retrieved:

This setup ensures a seamless integration of the marketplace SDK with server-side rendering, improving performance and user experience.

```tsx
const { getMarketplaceConfig, config, getInitialState } = await ssrClient();
```

<Expandable title="SSR Client Response">
  <ResponseField name="getMarketplaceConfig" type="MarketplaceConfig">
    Retrieves the marketplace configuration in builder mode, providing necessary settings for customization.
  </ResponseField>

  <ResponseField name="config" type="SdkConfig">
    Contains the resolved configuration based on the environment and server context.
  </ResponseField>

  <ResponseField name="getInitialState" type="InitialState">
    Fetches the initial state required for preloading marketplace data before rendering.
  </ResponseField>
</Expandable>

#### Setting Up layout.tsx

Now that we have the minimum requirements in place, the next step is to create a layout.tsx file inside the src folder. This file will define the structure of our application. You can find the code in this [GitHub repository](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-providers-tsx)

### Authentication

Great! We now have the foundation of our application. Next, we’ll create our homepage for connect wallet and disconnect functionality. To achieve this, we will add two new components to our repository. Inside the src/app/components directory, we will create [Connect.tsx](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-connect-tsx) and [Disconnect.tsx](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-disconnect-tsx) files.

#### Setting Up LandingPage.tsx

Create a new file in src/app named [LandingPage.tsx](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-landingpage-tsx). This file will define the homepage, integrating both wallet connection and disconnection functionality.

We're almost there! To complete the authentication integration, we will create a page.tsx file inside src/app. This file will integrate our LandingPage component with the following code:

```ts
import { ssrClient } from "@/config/marketplace-sdk/ssr";
import LandingPage from "./LandingPage";

const Page = async () => {
  const { getMarketplaceConfig } = await ssrClient();
  const { collections } = await getMarketplaceConfig();

  if (collections) return <LandingPage collections={collections} />;
};

export default Page;
```

#### Run and Test

Congratulations on making it this far! You can now run pnpm dev to test your authentication and everything you've implemented so far.

<Warning>
  Be sure to include a `.env` file in the root of your project to include client secrets
</Warning>

## 3. Displaying collections

To display the marketplace collections we need to create a folder named 'Collections' inside the 'src/app/components' directory. Within this folder, we will create two files: [index.tsx](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-index-collections-tsx) and [Collection.tsx](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-collection-tsx).

To finish we will add the Collections component in the LandingPage.tsx

```ts
"use client";

import { ConnectButton } from "./components/Connect";
import { useAccount } from "wagmi";
import { Disconnect } from "./components/Disconnect";
import { MarketplaceCollection } from "@0xsequence/marketplace-sdk";
import { Collections } from "./components/Collections";

interface LandingPageProps {
  collections: MarketplaceCollection[];
}

const LandingPage = ({ collections }: LandingPageProps) => {
  const { isConnected, address } = useAccount();

  if (isConnected && address) {
    return (
      <div>
        <h1>User address: {address}</h1>
        <Disconnect />
        <Collections collections={collections}/>
      </div>
    );
  }

  return <ConnectButton />;
};

export default LandingPage;
```

## 4. Listings and Offers

This section is for integrating the listings and offers from our marketplace into our UI.

To create the Items page and its components, we need to add a new folder named Collectibles inside the src/app/components directory. Within this folder, we will create two files: [index.tsx](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-index-collectibles) and [Collectible.tsx](https://gist.github.com/RichardIrala/79239f44c86e01fe465092ab765ee9fd#file-collectible-tsx).

Finally, create a page.tsx file inside src/app/collection/[chainParam]/[collectionId] and add the following code snippet:

```ts
"use client";

import { getChainId } from "@/app/utils/getChain";
import { Collectibles } from "@/app/components/Collectibles";
import { Address } from "viem";
import { useAccount } from "wagmi";
import { ConnectButton } from "@/app/components/Connect";
import { Disconnect } from "@/app/components/Disconnect";

type CollectionBuyPageParams = {
  params: {
    collectionId: string;
    chainParam: string;
  };
};

const CollectionBuyPage = ({ params }: CollectionBuyPageParams) => {
  const { address, isConnected } = useAccount();
  const chainId = getChainId(params.chainParam)!;
  const { collectionId } = params;

  return (
    <div>
      {address && isConnected ? (
        <div>
          <h1>User address: {address}</h1>
          <Disconnect />
        </div>
      ) : (
        <ConnectButton />
      )}
      <Collectibles
        chainId={String(chainId)}
        collectionId={collectionId as Address}
      />
    </div>
  );
};

export default CollectionBuyPage;
```

### Run and test

You have successfully added the items to your new page, and they should now be visible in the UI. To view them, run pnpm dev. From the landing page, select any of your collections to be redirected to the new items page. Ensure that everything functions as expected by testing the listing, purchasing, offer-making, and offer-accepting processes for an NFT.

## 5. Inventory (Optional)

To access the user's inventory, you can refer to the following documentation: [Sequence Inventory Modal](https://docs.sequence.xyz/solutions/wallets/sequence-kit/quickstart_examples/inventory). Everything is set up, and you only need to invoke the inventory modal.

If you prefer to build a custom UI using APIs, you can retrieve token balances through the following endpoint: [Get Token Balances API](https://docs.sequence.xyz/api/indexer/endpoints#tag/public/POST/rpc/Indexer/GetTokenBalances).